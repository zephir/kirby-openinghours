(function(){"use strict";function E(h,l,u,v,p,b,m,y){var f=typeof h=="function"?h.options:h;return l&&(f.render=l,f.staticRenderFns=u,f._compiled=!0),{exports:h,options:f}}const G={__name:"DateRange",props:{label:{type:String,required:!0},value:{type:Object},required:Boolean,disabled:Boolean},emits:["input"],setup(h,{emit:l}){const u=h,v=ref(null),p=({start:m,end:y})=>{const f=this.$library.dayjs(m),g=this.$library.dayjs(y);return f.isAfter(g)?(v.value="Start date must be before end date",!1):(v.value=null,!0)},b=m=>{const y=m;y.start&&!y.end&&(y.end=y.start),p(y)&&l("input",y)};return nextTick(()=>{var m,y;(m=u.value)!=null&&m.start&&((y=u.value)!=null&&y.end)&&b(u.value)}),{__sfc:!0,props:u,emit:l,dateError:v,validateRange:p,emitChange:b}}};var Q=function(){var p,b;var l=this,u=l._self._c,v=l._self._setupProxy;return u("k-field",l._b({staticClass:"k-daterange-field",attrs:{label:l.label,required:l.required,disabled:l.disabled}},"k-field",v.props,!1),[u("k-grid",{attrs:{variant:"fields"}},[u("k-column",{attrs:{width:"6/12"}},[u("k-date-field",{attrs:{label:"Von",value:(p=l.value)==null?void 0:p.start,type:"date",name:"from",time:!1,default:"now",invalid:!!v.dateError,help:v.dateError},on:{input:m=>v.emitChange("start",m)}})],1),u("k-column",{attrs:{width:"6/12"}},[u("k-date-field",{attrs:{label:"Bis",value:(b=l.value)==null?void 0:b.end,type:"date",name:"end",time:!1,default:"now"},on:{input:m=>v.emitChange("end",m)}})],1)],1)],1)},K=[],X=E(G,Q,K);const ee=X.exports,a=window.Vue;a.computed,a.customRef,a.defineAsyncComponent,a.defineComponent,a.effectScope,a.getCurrentInstance,a.getCurrentScope,a.h,a.inject,a.isProxy,a.isReactive,a.isReadonly,a.isRef,a.isShallow,a.markRaw,a.nextTick,a.onActivated,a.onBeforeMount,a.onBeforeUnmount,a.onBeforeUpdate,a.onDeactivated,a.onErrorCaptured,a.onMounted,a.onRenderTracked,a.onRenderTriggered,a.onScopeDispose,a.onServerPrefetch,a.onUnmounted,a.onUpdated,a.provide,a.proxyRefs,a.reactive,a.readonly,a.ref,a.shallowReactive,a.shallowReadonly,a.shallowRef,a.toRaw,a.toRef,a.toRefs,a.triggerRef,a.unref,a.useAttrs,a.useCssModule,a.useCssVars,a.useListeners,a.useSlots;const te=a.watch;a.watchEffect,a.watchPostEffect,a.watchSyncEffect;var ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function re(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var q={exports:{}};(function(h,l){(function(u,v){h.exports=v()})(ne,function(){var u=1e3,v=6e4,p=36e5,b="millisecond",m="second",y="minute",f="hour",g="day",O="week",k="month",z="quarter",j="year",T="date",N="Invalid Date",ce=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,de=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,fe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(s){var n=["th","st","nd","rd"],e=s%100;return"["+s+(n[(e-20)%10]||n[e]||n[0])+"]"}},I=function(s,n,e){var r=String(s);return!r||r.length>=n?s:""+Array(n+1-r.length).join(e)+s},he={s:I,z:function(s){var n=-s.utcOffset(),e=Math.abs(n),r=Math.floor(e/60),t=e%60;return(n<=0?"+":"-")+I(r,2,"0")+":"+I(t,2,"0")},m:function s(n,e){if(n.date()<e.date())return-s(e,n);var r=12*(e.year()-n.year())+(e.month()-n.month()),t=n.clone().add(r,k),i=e-t<0,o=n.clone().add(r+(i?-1:1),k);return+(-(r+(e-t)/(i?t-o:o-t))||0)},a:function(s){return s<0?Math.ceil(s)||0:Math.floor(s)},p:function(s){return{M:k,y:j,w:O,d:g,D:T,h:f,m:y,s:m,ms:b,Q:z}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(s){return s===void 0}},B="en",A={};A[B]=fe;var J="$isDayjsObject",U=function(s){return s instanceof L||!(!s||!s[J])},W=function s(n,e,r){var t;if(!n)return B;if(typeof n=="string"){var i=n.toLowerCase();A[i]&&(t=i),e&&(A[i]=e,t=i);var o=n.split("-");if(!t&&o.length>1)return s(o[0])}else{var d=n.name;A[d]=n,t=d}return!r&&t&&(B=t),t||!r&&B},w=function(s,n){if(U(s))return s.clone();var e=typeof n=="object"?n:{};return e.date=s,e.args=arguments,new L(e)},c=he;c.l=W,c.i=U,c.w=function(s,n){return w(s,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var L=function(){function s(e){this.$L=W(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[J]=!0}var n=s.prototype;return n.parse=function(e){this.$d=function(r){var t=r.date,i=r.utc;if(t===null)return new Date(NaN);if(c.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var o=t.match(ce);if(o){var d=o[2]-1||0,$=(o[7]||"0").substring(0,3);return i?new Date(Date.UTC(o[1],d,o[3]||1,o[4]||0,o[5]||0,o[6]||0,$)):new Date(o[1],d,o[3]||1,o[4]||0,o[5]||0,o[6]||0,$)}}return new Date(t)}(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return c},n.isValid=function(){return this.$d.toString()!==N},n.isSame=function(e,r){var t=w(e);return this.startOf(r)<=t&&t<=this.endOf(r)},n.isAfter=function(e,r){return w(e)<this.startOf(r)},n.isBefore=function(e,r){return this.endOf(r)<w(e)},n.$g=function(e,r,t){return c.u(e)?this[r]:this.set(t,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,r){var t=this,i=!!c.u(r)||r,o=c.p(e),d=function(Y,D){var C=c.w(t.$u?Date.UTC(t.$y,D,Y):new Date(t.$y,D,Y),t);return i?C:C.endOf(g)},$=function(Y,D){return c.w(t.toDate()[Y].apply(t.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(D)),t)},_=this.$W,M=this.$M,S=this.$D,x="set"+(this.$u?"UTC":"");switch(o){case j:return i?d(1,0):d(31,11);case k:return i?d(1,M):d(0,M+1);case O:var R=this.$locale().weekStart||0,H=(_<R?_+7:_)-R;return d(i?S-H:S+(6-H),M);case g:case T:return $(x+"Hours",0);case f:return $(x+"Minutes",1);case y:return $(x+"Seconds",2);case m:return $(x+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,r){var t,i=c.p(e),o="set"+(this.$u?"UTC":""),d=(t={},t[g]=o+"Date",t[T]=o+"Date",t[k]=o+"Month",t[j]=o+"FullYear",t[f]=o+"Hours",t[y]=o+"Minutes",t[m]=o+"Seconds",t[b]=o+"Milliseconds",t)[i],$=i===g?this.$D+(r-this.$W):r;if(i===k||i===j){var _=this.clone().set(T,1);_.$d[d]($),_.init(),this.$d=_.set(T,Math.min(this.$D,_.daysInMonth())).$d}else d&&this.$d[d]($);return this.init(),this},n.set=function(e,r){return this.clone().$set(e,r)},n.get=function(e){return this[c.p(e)]()},n.add=function(e,r){var t,i=this;e=Number(e);var o=c.p(r),d=function(M){var S=w(i);return c.w(S.date(S.date()+Math.round(M*e)),i)};if(o===k)return this.set(k,this.$M+e);if(o===j)return this.set(j,this.$y+e);if(o===g)return d(1);if(o===O)return d(7);var $=(t={},t[y]=v,t[f]=p,t[m]=u,t)[o]||1,_=this.$d.getTime()+e*$;return c.w(_,this)},n.subtract=function(e,r){return this.add(-1*e,r)},n.format=function(e){var r=this,t=this.$locale();if(!this.isValid())return t.invalidDate||N;var i=e||"YYYY-MM-DDTHH:mm:ssZ",o=c.z(this),d=this.$H,$=this.$m,_=this.$M,M=t.weekdays,S=t.months,x=t.meridiem,R=function(D,C,V,F){return D&&(D[C]||D(r,i))||V[C].slice(0,F)},H=function(D){return c.s(d%12||12,D,"0")},Y=x||function(D,C,V){var F=D<12?"AM":"PM";return V?F.toLowerCase():F};return i.replace(de,function(D,C){return C||function(V){switch(V){case"YY":return String(r.$y).slice(-2);case"YYYY":return c.s(r.$y,4,"0");case"M":return _+1;case"MM":return c.s(_+1,2,"0");case"MMM":return R(t.monthsShort,_,S,3);case"MMMM":return R(S,_);case"D":return r.$D;case"DD":return c.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return R(t.weekdaysMin,r.$W,M,2);case"ddd":return R(t.weekdaysShort,r.$W,M,3);case"dddd":return M[r.$W];case"H":return String(d);case"HH":return c.s(d,2,"0");case"h":return H(1);case"hh":return H(2);case"a":return Y(d,$,!0);case"A":return Y(d,$,!1);case"m":return String($);case"mm":return c.s($,2,"0");case"s":return String(r.$s);case"ss":return c.s(r.$s,2,"0");case"SSS":return c.s(r.$ms,3,"0");case"Z":return o}return null}(D)||o.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,r,t){var i,o=this,d=c.p(r),$=w(e),_=($.utcOffset()-this.utcOffset())*v,M=this-$,S=function(){return c.m(o,$)};switch(d){case j:i=S()/12;break;case k:i=S();break;case z:i=S()/3;break;case O:i=(M-_)/6048e5;break;case g:i=(M-_)/864e5;break;case f:i=M/p;break;case y:i=M/v;break;case m:i=M/u;break;default:i=M}return t?i:c.a(i)},n.daysInMonth=function(){return this.endOf(k).$D},n.$locale=function(){return A[this.$L]},n.locale=function(e,r){if(!e)return this.$L;var t=this.clone(),i=W(e,r,!0);return i&&(t.$L=i),t},n.clone=function(){return c.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},s}(),Z=L.prototype;return w.prototype=Z,[["$ms",b],["$s",m],["$m",y],["$H",f],["$W",g],["$M",k],["$y",j],["$D",T]].forEach(function(s){Z[s[1]]=function(n){return this.$g(n,s[0],s[1])}}),w.extend=function(s,n){return s.$i||(s(n,L,w),s.$i=!0),w},w.locale=W,w.isDayjs=U,w.unix=function(s){return w(1e3*s)},w.en=A[B],w.Ls=A,w.p={},w})})(q);var ae=q.exports;const P=re(ae),se={__name:"Weekdays",props:{label:{type:String,required:!0},value:Object,required:Boolean,disabled:Boolean,daterange:Object},emits:["input"],setup(h,{emit:l}){const u=h,v=ref([{id:"mo",name:"Montag",isActive:!1},{id:"tu",name:"Dienstag",isActive:!1},{id:"we",name:"Mittwoch",isActive:!1},{id:"th",name:"Donnerstag",isActive:!1},{id:"fr",name:"Freitag",isActive:!1},{id:"sa",name:"Samstag",isActive:!1},{id:"su",name:"Sonntag",isActive:!1}]),p=ref(null),b=ref(null),m=()=>{if(!p.value||!b.value)return;let f=p.value,g=[];for(;f.isBefore(b.value)||f.isSame(b.value);)g.push(f.format("dd").toLowerCase()),f=f.add(1,"day");g=[...new Set(g)],console.log(g),g.value.forEach(O=>{O.isActive=g.includes(O.id.toString())}),console.log(g.value)};return te(daterange,f=>{p.value=P(f.start),b.value=P(f.end),m()},{deep:!0}),{__sfc:!0,props:u,emit:l,weekdays:v,startDate:p,endDate:b,evaluateWeekdays:m,emitChange:(f,g)=>{const O={...u.value,[f]:g};l("input",O)}}}};var ie=function(){var l=this,u=l._self._c,v=l._self._setupProxy;return u("div",l._l(v.weekdays,function(p){return u("div",{key:p.id},[p.isActive?u("div",[u("k-object-field",{attrs:{label:p.name,fields:{closed:{label:"Geschlossen",name:"closed",type:"toggle",default:!1,saveable:!0,text:["nein","ja"]},from1:{label:"Von",name:"from1",type:"time",saveable:!0,when:{closed:!1}},to1:{label:"Bis",name:"to1",type:"time",saveable:!0,when:{closed:!1}},from2:{label:"Von",name:"from2",type:"time",saveable:!0,when:{closed:!1}},to2:{label:"Bis",name:"to2",type:"time",saveable:!0,when:{closed:!1}}},value:l.value[p.id]?l.value[p.id]:null},on:{input:b=>v.emitChange(p.id,b)}}),u("div",{staticStyle:{height:"20px"}})],1):l._e()])}),0)},oe=[],ue=E(se,ie,oe);const le=ue.exports;panel.plugin("zephir/openinghours",{fields:{daterange:ee,weekdays:le},components:{"k-daterange-field-preview":{props:{value:Object,column:Object,field:Object},computed:{preview(){const h=this.$library.dayjs(this.value.start),l=this.$library.dayjs(this.value.end);return`${h.format("DD.MM.YYYY")} - ${l.format("DD.MM.YYYY")}`}},template:'<div class="k-bubbles-field-preview k-object-field-preview">{{ preview }}</div>'},"k-weekdays-field-preview":{props:{value:Object,column:Object,field:Object},data(){return{weekdays:{mo:"Montag",tu:"Dienstag",we:"Mittwoch",th:"Donnerstag",fr:"Freitag",sa:"Samstag",su:"Sonntag"}}},computed:{preview(){const h=[];console.log(this.value);for(const[l,u]of Object.entries(this.value))!u||Array.isArray(u)&&u.length===0||h.push(this.weekdays[l]);return h.join(", ")}},template:'<div class="k-bubbles-field-preview k-object-field-preview">{{ preview }}</div>'}}})})();
