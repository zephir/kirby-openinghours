(function(){"use strict";const s=window.Vue,z=s.computed;s.customRef,s.defineAsyncComponent,s.defineComponent,s.effectScope,s.getCurrentInstance,s.getCurrentScope,s.h,s.inject,s.isProxy,s.isReactive,s.isReadonly,s.isRef,s.isShallow,s.markRaw;const Q=s.nextTick;s.onActivated,s.onBeforeMount,s.onBeforeUnmount,s.onBeforeUpdate,s.onDeactivated,s.onErrorCaptured,s.onMounted,s.onRenderTracked,s.onRenderTriggered,s.onScopeDispose,s.onServerPrefetch,s.onUnmounted,s.onUpdated,s.provide,s.proxyRefs,s.reactive,s.readonly;const V=s.ref;s.shallowReactive,s.shallowReadonly,s.shallowRef,s.toRaw,s.toRef,s.toRefs,s.triggerRef,s.unref,s.useAttrs,s.useCssModule,s.useCssVars,s.useListeners,s.useSlots;const X=s.watch;s.watchEffect,s.watchPostEffect,s.watchSyncEffect;var ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function te(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var N={exports:{}};(function(g,r){(function(i,c){g.exports=c()})(ee,function(){var i=1e3,c=6e4,f=36e5,h="millisecond",m="second",$="minute",d="hour",p="day",S="week",D="month",Z="quarter",j="year",T="date",J="Invalid Date",De=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Me=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Se={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(o){var n=["th","st","nd","rd"],e=o%100;return"["+o+(n[(e-20)%10]||n[e]||n[0])+"]"}},q=function(o,n,e){var a=String(o);return!a||a.length>=n?o:""+Array(n+1-a.length).join(e)+o},ke={s:q,z:function(o){var n=-o.utcOffset(),e=Math.abs(n),a=Math.floor(e/60),t=e%60;return(n<=0?"+":"-")+q(a,2,"0")+":"+q(t,2,"0")},m:function o(n,e){if(n.date()<e.date())return-o(e,n);var a=12*(e.year()-n.year())+(e.month()-n.month()),t=n.clone().add(a,D),u=e-t<0,l=n.clone().add(a+(u?-1:1),D);return+(-(a+(e-t)/(u?t-l:l-t))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M:D,y:j,w:S,d:p,D:T,h:d,m:$,s:m,ms:h,Q:Z}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return o===void 0}},H="en",x={};x[H]=Se;var G="$isDayjsObject",I=function(o){return o instanceof E||!(!o||!o[G])},P=function o(n,e,a){var t;if(!n)return H;if(typeof n=="string"){var u=n.toLowerCase();x[u]&&(t=u),e&&(x[u]=e,t=u);var l=n.split("-");if(!t&&l.length>1)return o(l[0])}else{var _=n.name;x[_]=n,t=_}return!a&&t&&(H=t),t||!a&&H},w=function(o,n){if(I(o))return o.clone();var e=typeof n=="object"?n:{};return e.date=o,e.args=arguments,new E(e)},v=ke;v.l=P,v.i=I,v.w=function(o,n){return w(o,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var E=function(){function o(e){this.$L=P(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[G]=!0}var n=o.prototype;return n.parse=function(e){this.$d=function(a){var t=a.date,u=a.utc;if(t===null)return new Date(NaN);if(v.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var l=t.match(De);if(l){var _=l[2]-1||0,y=(l[7]||"0").substring(0,3);return u?new Date(Date.UTC(l[1],_,l[3]||1,l[4]||0,l[5]||0,l[6]||0,y)):new Date(l[1],_,l[3]||1,l[4]||0,l[5]||0,l[6]||0,y)}}return new Date(t)}(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return v},n.isValid=function(){return this.$d.toString()!==J},n.isSame=function(e,a){var t=w(e);return this.startOf(a)<=t&&t<=this.endOf(a)},n.isAfter=function(e,a){return w(e)<this.startOf(a)},n.isBefore=function(e,a){return this.endOf(a)<w(e)},n.$g=function(e,a,t){return v.u(e)?this[a]:this.set(t,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,a){var t=this,u=!!v.u(a)||a,l=v.p(e),_=function(A,k){var R=v.w(t.$u?Date.UTC(t.$y,k,A):new Date(t.$y,k,A),t);return u?R:R.endOf(p)},y=function(A,k){return v.w(t.toDate()[A].apply(t.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(k)),t)},b=this.$W,M=this.$M,O=this.$D,W="set"+(this.$u?"UTC":"");switch(l){case j:return u?_(1,0):_(31,11);case D:return u?_(1,M):_(0,M+1);case S:var Y=this.$locale().weekStart||0,B=(b<Y?b+7:b)-Y;return _(u?O-B:O+(6-B),M);case p:case T:return y(W+"Hours",0);case d:return y(W+"Minutes",1);case $:return y(W+"Seconds",2);case m:return y(W+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,a){var t,u=v.p(e),l="set"+(this.$u?"UTC":""),_=(t={},t[p]=l+"Date",t[T]=l+"Date",t[D]=l+"Month",t[j]=l+"FullYear",t[d]=l+"Hours",t[$]=l+"Minutes",t[m]=l+"Seconds",t[h]=l+"Milliseconds",t)[u],y=u===p?this.$D+(a-this.$W):a;if(u===D||u===j){var b=this.clone().set(T,1);b.$d[_](y),b.init(),this.$d=b.set(T,Math.min(this.$D,b.daysInMonth())).$d}else _&&this.$d[_](y);return this.init(),this},n.set=function(e,a){return this.clone().$set(e,a)},n.get=function(e){return this[v.p(e)]()},n.add=function(e,a){var t,u=this;e=Number(e);var l=v.p(a),_=function(M){var O=w(u);return v.w(O.date(O.date()+Math.round(M*e)),u)};if(l===D)return this.set(D,this.$M+e);if(l===j)return this.set(j,this.$y+e);if(l===p)return _(1);if(l===S)return _(7);var y=(t={},t[$]=c,t[d]=f,t[m]=i,t)[l]||1,b=this.$d.getTime()+e*y;return v.w(b,this)},n.subtract=function(e,a){return this.add(-1*e,a)},n.format=function(e){var a=this,t=this.$locale();if(!this.isValid())return t.invalidDate||J;var u=e||"YYYY-MM-DDTHH:mm:ssZ",l=v.z(this),_=this.$H,y=this.$m,b=this.$M,M=t.weekdays,O=t.months,W=t.meridiem,Y=function(k,R,L,U){return k&&(k[R]||k(a,u))||L[R].slice(0,U)},B=function(k){return v.s(_%12||12,k,"0")},A=W||function(k,R,L){var U=k<12?"AM":"PM";return L?U.toLowerCase():U};return u.replace(Me,function(k,R){return R||function(L){switch(L){case"YY":return String(a.$y).slice(-2);case"YYYY":return v.s(a.$y,4,"0");case"M":return b+1;case"MM":return v.s(b+1,2,"0");case"MMM":return Y(t.monthsShort,b,O,3);case"MMMM":return Y(O,b);case"D":return a.$D;case"DD":return v.s(a.$D,2,"0");case"d":return String(a.$W);case"dd":return Y(t.weekdaysMin,a.$W,M,2);case"ddd":return Y(t.weekdaysShort,a.$W,M,3);case"dddd":return M[a.$W];case"H":return String(_);case"HH":return v.s(_,2,"0");case"h":return B(1);case"hh":return B(2);case"a":return A(_,y,!0);case"A":return A(_,y,!1);case"m":return String(y);case"mm":return v.s(y,2,"0");case"s":return String(a.$s);case"ss":return v.s(a.$s,2,"0");case"SSS":return v.s(a.$ms,3,"0");case"Z":return l}return null}(k)||l.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,a,t){var u,l=this,_=v.p(a),y=w(e),b=(y.utcOffset()-this.utcOffset())*c,M=this-y,O=function(){return v.m(l,y)};switch(_){case j:u=O()/12;break;case D:u=O();break;case Z:u=O()/3;break;case S:u=(M-b)/6048e5;break;case p:u=(M-b)/864e5;break;case d:u=M/f;break;case $:u=M/c;break;case m:u=M/i;break;default:u=M}return t?u:v.a(u)},n.daysInMonth=function(){return this.endOf(D).$D},n.$locale=function(){return x[this.$L]},n.locale=function(e,a){if(!e)return this.$L;var t=this.clone(),u=P(e,a,!0);return u&&(t.$L=u),t},n.clone=function(){return v.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},o}(),K=E.prototype;return w.prototype=K,[["$ms",h],["$s",m],["$m",$],["$H",d],["$W",p],["$M",D],["$y",j],["$D",T]].forEach(function(o){K[o[1]]=function(n){return this.$g(n,o[0],o[1])}}),w.extend=function(o,n){return o.$i||(o(n,E,w),o.$i=!0),w},w.locale=P,w.isDayjs=I,w.unix=function(o){return w(1e3*o)},w.en=x[H],w.Ls=x,w.p={},w})})(N);var ne=N.exports;const C=te(ne);function F(g,r,i,c,f,h,m,$){var d=typeof g=="function"?g.options:g;return r&&(d.render=r,d.staticRenderFns=i,d._compiled=!0),h&&(d._scopeId="data-v-"+h),{exports:g,options:d}}const re={__name:"DateRange",props:{label:{type:String,required:!0},value:{type:Object},required:Boolean,disabled:Boolean},emits:["input"],setup(g,{emit:r}){const i=g,c=V(null),f=({start:m,end:$})=>{const d=C(m),p=C($);return d.isAfter(p)?(c.value="Start date must be before end date",!1):(c.value=null,!0)},h=(m,$)=>{let d;$?d={...i.value,[$]:m}:d=m,d.start&&!d.end&&(d.end=d.start),f(d)&&(console.log({updatedValue:d}),r("input",d))};return Q(()=>{var m,$;(m=i.value)!=null&&m.start&&(($=i.value)!=null&&$.end)&&h(i.value)}),{__sfc:!0,props:i,emit:r,dateError:c,validateRange:f,emitChange:h}}};var ae=function(){var f,h;var r=this,i=r._self._c,c=r._self._setupProxy;return i("k-field",r._b({staticClass:"k-daterange-field",attrs:{label:r.label,required:r.required,disabled:r.disabled}},"k-field",c.props,!1),[i("k-grid",{attrs:{variant:"fields"}},[i("k-column",{attrs:{width:"6/12"}},[i("k-date-field",{attrs:{label:"Von",value:(f=r.value)==null?void 0:f.start,type:"date",name:"from",time:!1,default:"now",invalid:!!c.dateError,help:c.dateError},on:{input:m=>c.emitChange(m,"start")}})],1),i("k-column",{attrs:{width:"6/12"}},[i("k-date-field",{attrs:{label:"Bis",value:(h=r.value)==null?void 0:h.end,type:"date",name:"end",time:!1,default:"now",invalid:!!c.dateError},on:{input:m=>c.emitChange(m,"end")}})],1)],1)],1)},se=[],ie=F(re,ae,se,!1,null,null);const oe=ie.exports,ue={__name:"Weekdays",props:{label:{type:String,required:!0},value:Object,required:Boolean,disabled:Boolean,daterange:Object},emits:["input"],setup(g,{emit:r}){const i=g,c=V([{id:"mo",name:"Montag",isActive:!1},{id:"tu",name:"Dienstag",isActive:!1},{id:"we",name:"Mittwoch",isActive:!1},{id:"th",name:"Donnerstag",isActive:!1},{id:"fr",name:"Freitag",isActive:!1},{id:"sa",name:"Samstag",isActive:!1},{id:"su",name:"Sonntag",isActive:!1}]),f=V(null),h=V(null),m=()=>{if(!f.value||!h.value)return;let p=f.value,S=[];for(;p.isBefore(h.value)||p.isSame(h.value);)S.push(p.format("dd").toLowerCase()),p=p.add(1,"day");S=[...new Set(S)],c.value.forEach(D=>{D.isActive=S.includes(D.id.toString())})},$=(p,S)=>{const D={...i.value,[p]:S};r("input",D)},d=p=>{f.value=C(p.start),h.value=C(p.end),m()};return X(()=>i.daterange,p=>{d(p)},{deep:!0}),d(i.daterange),{__sfc:!0,props:i,emit:r,weekdays:c,startDate:f,endDate:h,evaluateWeekdays:m,emitChange:$,onDaterangeChange:d}}};var le=function(){var r=this,i=r._self._c,c=r._self._setupProxy;return i("div",r._l(c.weekdays,function(f){return i("div",{key:f.id},[f.isActive?i("div",[i("k-object-field",{attrs:{label:f.name,fields:{closed:{label:"Geschlossen",name:"closed",type:"toggle",default:!1,saveable:!0,text:["nein","ja"]},from1:{label:"Von",name:"from1",type:"time",saveable:!0,when:{closed:!1}},to1:{label:"Bis",name:"to1",type:"time",saveable:!0,when:{closed:!1}},from2:{label:"Von",name:"from2",type:"time",saveable:!0,when:{closed:!1}},to2:{label:"Bis",name:"to2",type:"time",saveable:!0,when:{closed:!1}}},value:r.value[f.id]?r.value[f.id]:null},on:{input:h=>c.emitChange(f.id,h)}}),i("div",{staticStyle:{height:"20px"}})],1):r._e()])}),0)},ce=[],de=F(ue,le,ce,!1,null,null);const fe=de.exports,he={__name:"OpeningHours",props:{value:{type:Object,required:!0}},emits:["input"],setup(g,{emit:r}){const i=g;return{__sfc:!0,props:i,emit:r,emitChange:(f,h)=>{r("input",{...i.value,[f]:h})},DateRange:oe,Weekdays:fe}}};var ve=function(){var r=this,i=r._self._c,c=r._self._setupProxy;return i("div",{staticClass:"k-openinghours-field"},[i("k-text-field",{attrs:{label:"Bezeichnung",value:r.value.label},on:{input:f=>c.emitChange("label",f)}}),i(c.DateRange,{attrs:{label:"Zeitraum",value:r.value.daterange},on:{input:f=>c.emitChange("daterange",f)}}),i(c.Weekdays,{attrs:{label:"Wochentage",value:r.value.weekdays,daterange:r.value.daterange},on:{input:f=>c.emitChange("weekdays",f)}})],1)},pe=[],me=F(he,ve,pe,!1,null,"ca0fb6bf");const _e=me.exports,ge={__name:"OpeningHoursPreview",props:{value:Object,column:Object,field:Object},setup(g){const r=g,i={mo:"Montag",tu:"Dienstag",we:"Mittwoch",th:"Donnerstag",fr:"Freitag",sa:"Samstag",su:"Sonntag"},c=z(()=>{let h=[];console.log(r.value);const m=C(r.value.daterange.start),$=C(r.value.daterange.end);let d=m;for(;d.isBefore($)||d.isSame($);)h.push(d.format("dd").toLowerCase()),d=d.add(1,"day");return[...new Set(h)]}),f=z(()=>{const h=C(r.value.daterange.start),m=C(r.value.daterange.end),$=`${h.format("DD.MM.YYYY")} - ${m.format("DD.MM.YYYY")}`,d=[];for(const[p,S]of Object.entries(r.value.weekdays))S&&c.value.includes(p)&&d.push(`${i[p]}`+(S.closed?" (geschlossen)":""));return{label:r.value.label,daterange:$,weekdays:d}});return{__sfc:!0,props:r,weekdayLabels:i,activeWeekdays:c,preview:f}}};var $e=function(){var f,h;var r=this,i=r._self._c,c=r._self._setupProxy;return i("div",{staticClass:"k-openinghours-field-preview"},[c.preview.label?i("strong",[r._v(r._s(c.preview.label)+": ")]):r._e(),c.preview.daterange?i("span",[r._v(r._s(c.preview.daterange))]):r._e(),(h=(f=c.preview)==null?void 0:f.weekdays)!=null&&h.length?i("span",[r._v(": "+r._s(c.preview.weekdays.join(", ")))]):i("span",[r._v(": Keine Wochentage konfiguriert")])])},ye=[],we=F(ge,$e,ye,!1,null,"cf05a5ab");const be=we.exports;panel.plugin("zephir/openinghours",{fields:{openinghours:_e},components:{"k-openinghours-field-preview":be}})})();
